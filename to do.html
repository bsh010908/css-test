<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>시간대별 To-Do List (드래그 가능)</title>
<style>
  body {
    font-family: "Pretendard", "Noto Sans KR", sans-serif;
    margin: 0;
    padding: 20px;
    background: #F9FAFB;
    color: #333;
  }
  h1 { text-align: center; margin-bottom: 20px; }

  .todo-schedule {
    max-width: 500px;
    margin: 0 auto;
  }

  .time-section {
    display: grid;
    grid-template-columns: 100px 1fr;
    border: 1px solid #1791DD;
    border-radius: 6px;
    margin-bottom: 10px;
    overflow: hidden;
  }

  .time {
    background: #F1F5F9;
    font-weight: bold;
    text-align: center;
    border-right: 1px solid #ddd;
    padding: 12px;
  }

  .task {
    background: #fff;
    padding: 12px;
    cursor: grab;
    transition: all 0.2s ease;
  }

  .task:hover { background: #E0F2FE; transform: scale(1.02); }
  .task.full { grid-column: 1 / -1; background: #FEF3C7; text-align: center; font-weight: bold; }

  .dragging { opacity: 0.5; }
</style>
</head>
<body>

<h1>⏰ 시간대별 To-Do List</h1>

<div class="todo-schedule" id="todo">

  <div class="time-section" data-time="08:00">
    <div class="time">08:00</div>
    <div class="task" draggable="true">출근 / 이메일 확인</div>
  </div>

  <div class="time-section" data-time="09:00">
    <div class="time">09:00</div>
    <div class="task" draggable="true">팀 미팅</div>
  </div>

  <div class="time-section" data-time="10:00">
    <div class="time">10:00</div>
    <div class="task" draggable="true">API 기능 개발</div>
  </div>

  <div class="time-section" data-time="11:00">
    <div class="time">11:00</div>
    <div class="task" draggable="true">코드 리뷰</div>
  </div>

  <div class="time-section" data-time="12:00">
    <div class="time">12:00</div>
    <div class="task" draggable="true">🍴 점심 식사</div>
  </div>

</div>

<script>
const todo = document.getElementById("todo");
let dragging = null;

// 드래그 시작
todo.addEventListener("dragstart", e => {
  if (e.target.classList.contains("task")) {
    dragging = e.target;
    e.target.classList.add("dragging");
  }
});

// 드래그 종료
todo.addEventListener("dragend", e => {
  if (dragging) {
    dragging.classList.remove("dragging");
    dragging = null;
  }
});

// 드래그 오버
todo.addEventListener("dragover", e => {
  e.preventDefault();
  // 가장 가까운 time-section 선택
  const sections = [...todo.querySelectorAll(".time-section")];
  const section = sections.find(sec => {
    const rect = sec.getBoundingClientRect();
    return e.clientY > rect.top && e.clientY < rect.bottom;
  });
  if (section) {
    // 마우스 위치 기준으로 task 위치 결정
    const tasks = [...section.querySelectorAll(".task:not(.dragging)")];
    const afterElement = tasks.find(t => {
      const box = t.getBoundingClientRect();
      return e.clientY < box.top + box.height / 2;
    });
    if (!afterElement) {
      section.appendChild(dragging);
    } else {
      section.insertBefore(dragging, afterElement);
    }
  }
});
</script>

</body>
</html>
